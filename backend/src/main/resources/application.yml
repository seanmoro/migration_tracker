spring:
  application:
    name: migration-tracker-api
  
  datasource:
    # Database path will be resolved in DatabaseConfig.java
    # This is a placeholder - actual path resolution happens in code
    url: jdbc:sqlite:../resources/database/migrations.db
    driver-class-name: org.sqlite.JDBC

# Migration Tracker Configuration
# Set MIGRATION_TRACKER_DB_PATH environment variable to override database location
migration:
  tracker:
    database:
      path: ${MIGRATION_TRACKER_DB_PATH:}
    
  jdbc:
    template:
      query-timeout: 30

# PostgreSQL connection settings (read from tracker.yaml or environment)
postgres:
  blackpearl:
    host: ${MT_BLACKPEARL_HOST:localhost}
    port: ${MT_BLACKPEARL_PORT:5432}
    database: ${MT_BLACKPEARL_DATABASE:tapesystem}
    username: ${MT_BLACKPEARL_USERNAME:postgres}
    password: ${MT_BLACKPEARL_PASSWORD:}
  rio:
    host: ${MT_RIO_HOST:localhost}
    port: ${MT_RIO_PORT:5432}
    database: ${MT_RIO_DATABASE:rio_db}
    username: ${MT_RIO_USERNAME:postgres}
    password: ${MT_RIO_PASSWORD:}

  sql:
    init:
      mode: always
      data-locations: classpath:data.sql
      continue-on-error: true

server:
  port: 8080
  servlet:
    context-path: /api

springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html

logging:
  level:
    com.spectralogic.migrationtracker: DEBUG
    org.springframework.web: INFO
    org.springframework.jdbc: DEBUG
  file:
    name: ../log/migration_tracker_api.log
  pattern:
    file: "%d{yyyy-MM-dd HH:mm:ss} %-5level %logger{36} - %msg%n"
